<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>servio: Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">servio
   </div>
   <div id="projectbrief">open source servomotor firmware</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_src_2iface_2iface.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Interface</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Servio communicates via a character-based protocol. The user is expected to send a command-line-style message over UART delimited with '<br  />
' character. The servo will reply with a JSON-encoded response. The UART is configured as follows: 8-bit word length, 1 stop bit, no parity, 230400 baud.</p>
<p>This section will explain how the system behaves, followed by a description of existing commands.</p>
<h1><a class="anchor" id="autotoc_md65"></a>
Message</h1>
<p>The generic pattern for a message is: </p><div class="fragment"><div class="line">&lt;root_cmd&gt; &lt;subcmd1&gt; &lt;value1&gt; &lt;arg2=value2&gt; \n</div>
</div><!-- fragment --><p> Any message starts with a specific command that has to be executed. Commands can be organized into a nested structure, hence multiple keywords can be present to specify a command. Any command keyword is separated by at least one whitespace character.</p>
<p>After the command, some commands may support arguments. These are separated by whitespace. Any arguments without a keyword are positionally matched to the expected argument set. Following that are arguments in the form of key=value pairs. If an argument has a default value it does not have to be provided.</p>
<p>Note that commands and args are not explicitly separated. The parser is context-aware - it knows whether to expect a nested command or argument.</p>
<p>Here are some examples:</p><ul>
<li>Non-nested command without args: <code>info</code></li>
<li>Nested command without args: <code>cfg clear</code></li>
<li>Non-nested command with position arg: <code>prop position</code></li>
<li>Non-nested command with keyword arg: <code>prop name=position</code></li>
<li>Nested command with position arg: <code>cfg get model</code></li>
<li>Nested command with keyword arg: <code>cfg get field=model</code></li>
<li>Nested command with position and keyword arg: <code>cfg set minimum_voltage value=0.1</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md66"></a>
Reply</h1>
<p>Servio always replies with valid JSON, whose root element is an array with at least one item. The first item is always either the string "OK" or "NOK".</p>
<p>Example combinations of answers for commands:</p><ul>
<li><code>cfg clear</code>: <code>["OK"]</code></li>
<li><code>cfg get model</code>: <code>["OK", "kavango6"]</code></li>
<li><code>info</code>: <code>["OK",{"version":"v0.2.0-82-g6fa680832","commit":"6fa68083287dee3e6f71438346d1c4406dc929ec"}]</code></li>
<li><code>invalid_cmd</code>: <code>["NOK","parse error","unknown command"]</code></li>
</ul>
<p>The number of items in the array and their semantics depend on each command.</p>
<h1><a class="anchor" id="autotoc_md67"></a>
Types</h1>
<p>Arguments of commands have types; these are validated by the parser. Any command processing can be subject to more validation, but that is not done by the parser.</p>
<h2><a class="anchor" id="autotoc_md68"></a>
int32_t</h2>
<p>Standard 32-bit integer value. </p>
<h2><a class="anchor" id="autotoc_md69"></a>
float</h2>
<p>32-bit float value supporting scientific syntax. </p>
<h2><a class="anchor" id="autotoc_md70"></a>
string</h2>
<p>String limited up to 32 characters. Must be enclosed in quotation marks. </p>
<h2><a class="anchor" id="autotoc_md71"></a>
bool</h2>
<p>Boolean value in the form of a string <code>true</code> or <code>false</code>. </p>
<h2><a class="anchor" id="autotoc_md72"></a>
expr_tok</h2>
<p>Wildcard token for accepting: <code>string</code>, <code>float</code>, <code>int32_t</code>, <code>bool</code></p>
<h2><a class="anchor" id="autotoc_md73"></a>
enum property</h2>
<ul>
<li><em>current</em>: Actual current flowing through the servomotor</li>
<li><em>vcc</em>: Actual input voltage</li>
<li><em>temp</em>: Actual temperature of the MCU</li>
<li><em>position</em>: Actual position of the servomotor</li>
<li><em>velocity</em>: Actual velocity of the servomotor</li>
</ul>
<h1><a class="anchor" id="autotoc_md74"></a>
Commands</h1>
<h3><a class="anchor" id="autotoc_md75"></a>
cmd: govctl activate &lt;governor&gt;</h3>
<p>Activate a governor</p>
<ul>
<li><em>governor</em>: Name of the governor to activate<ul>
<li>type: <em>string</em> </li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md76"></a>
cmd: govctl deactivate</h3>
<p>Deactivate currently active governor</p>
<h3><a class="anchor" id="autotoc_md77"></a>
cmd: govctl active</h3>
<p>Returns name of active governor or nothing</p>
<h3><a class="anchor" id="autotoc_md78"></a>
cmd: govctl list &lt;index&gt;</h3>
<p>List X-th governor</p>
<ul>
<li><em>index</em>: Index of the governor to list, returns nothing in case of out of range index<ul>
<li>type: <em>int32_t</em> </li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md79"></a>
group: govctl</h2>
<p>Control the governors</p>
<h2><a class="anchor" id="autotoc_md80"></a>
cmd: gov</h2>
<p>Forward to governors</p>
<h2><a class="anchor" id="autotoc_md81"></a>
cmd: prop &lt;name&gt;</h2>
<p>Get properties of the servomotor</p>
<ul>
<li><em>name</em>: Property to get<ul>
<li>type: <em>property</em> </li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md82"></a>
cmd: cfg set &lt;field&gt; &lt;value&gt; &lt;governor = ""&gt;</h3>
<p>Set a configuration field</p>
<ul>
<li><em>field</em>: Configuration field to set<ul>
<li>type: <em>string</em></li>
</ul>
</li>
<li><em>value</em>: Value to set for the configuration field, type depends on the field<ul>
<li>type: <em>expr_tok</em></li>
</ul>
</li>
<li><em>governor</em>: Name of governor from which list<ul>
<li>type: <em>string</em> </li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md83"></a>
cmd: cfg get &lt;field&gt; &lt;governor = ""&gt;</h3>
<p>Get a configuration field</p>
<ul>
<li><em>field</em>: Configuration field to get<ul>
<li>type: <em>string</em></li>
</ul>
</li>
<li><em>governor</em>: Name of governor from which list<ul>
<li>type: <em>string</em> </li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md84"></a>
cmd: cfg list &lt;index = 0&gt; &lt;governor = ""&gt;</h3>
<p>List X-th configuration field</p>
<ul>
<li><em>index</em>: Index for the configuration field to list, returns nothing in case of out of range index<ul>
<li>type: <em>int32_t</em></li>
</ul>
</li>
<li><em>governor</em>: Name of governor from which list<ul>
<li>type: <em>string</em> </li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md85"></a>
cmd: cfg commit</h3>
<p>Commit the current configuration changes to memory</p>
<h3><a class="anchor" id="autotoc_md86"></a>
cmd: cfg clear</h3>
<p>Clear the current configuration from memory</p>
<h2><a class="anchor" id="autotoc_md87"></a>
group: cfg</h2>
<p>Configuration commands for the servomotor. See configuration documentation to get list of existing fields. By default configuration commands target the servio itself, if governor argument is provided it targets the specific governor. As an alternative if field is delimited by single dot, the first string targets governor. That is current.curr_lim_min would target curr_lim_min field of current governor.</p>
<h2><a class="anchor" id="autotoc_md88"></a>
cmd: info</h2>
<p>Get information about the servomotor</p>
<pre class="fragment">                                 &lt; !--GEN END HERE-- &gt;
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Dec 27 2025 21:27:50 for servio by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
